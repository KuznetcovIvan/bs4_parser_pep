# Парсер документации Python

![Python](https://img.shields.io/badge/Python-3.9+-blue)
![BeautifulSoup](https://img.shields.io/badge/BeautifulSoup-4.9.3-orange)
![Requests](https://img.shields.io/badge/Requests-2.27.1-green)
![Requests-Cache](https://img.shields.io/badge/Requests--Cache-1.0.0-yellow)

Это парсер на Python, основанный на библиотеке BeautifulSoup (bs4) и предназначенный для извлечения и обработки данных с официальных сайтов [документации Python](https://docs.python.org/3/) и [предложений по улучшению Python (PEP)](https://peps.python.org/).

#### Со второй версией парсера реализованной на фреймворке **Scrapy** можно ознакомиться [тут](https://github.com/KuznetcovIvan/scrapy_parser_pep).
___

## В функционал входит:
- парсинг ссылок на статьи «Что нового» для всех версий Python;
- парсинг ссылок на страницы с документацией для всех версий Python;
- скачивание архива с документацией в формате PDF для последней версии Python;
- парсинг данных обо всех документах PEP, обработка и вывод количества PEP в каждом статусе, а также общего количества PEP.
___

## Установка

- Клонируйте проект с [репозитория](https://github.com/KuznetcovIvan/bs4_parser_pep) `git clone https://github.com/KuznetcovIvan/bs4_parser_pep.git`.
- Находясь в корне проекта создайте и активируйте виртуальное окружение `python -m venv venv`, `source/venv/Script/activate`
(`python3 -m venv venv`, `source venv/bin/activate` для Linux / macOS).
- Установите зависимости из файла requirements.txt `pip install -r requirements.txt`.

___

## Использование

Находясь во вложенной директории `src`, запустите парсер командой `python main.py <режим> <опции>`


**Режимы**:
| Режим            | Описание                                                                 |
|------------------|--------------------------------------------------------------------------|
| `whats-new`      | Получение ссылок на статьи «Что нового» для всех версий Python           |
| `latest-versions`| Получение ссылок на страницы с документацией для всех версий Python      |
| `download`       | Скачивание архива с документацией для последней версии Python в папку `downloads`|
| `pep`            | Получение количества PEP в каждом статусе, а также общего количества PEP |

**Опции:**

| Опция                | Описание                                                                 |
|----------------------|--------------------------------------------------------------------------|
| `-h`, `--help`        | вывод списка режимов и опций                                             |
| `-c`, `--clear-cache` | очищает кэш перед запуском                                               |
| `-o`, `--output [pretty\|file]` | формат вывода: <br>• `pretty` — выводит результаты в виде таблицы в консоли <br>• `file` — сохраняет результаты в CSV в папке `results` |

___

## Логирование

Логи записываются в консоль и файл `logs/parser.log`. Файл ротируется при достижении 1 МБ, сохраняется до 5 резервных копий.

___
## Структура файлов

| Файл            | Описание                                                                 |
|------------------|--------------------------------------------------------------------------|
| `main.py`        | Точка входа. Запускает парсер и обрабатывает аргументы командной строки |
| `configs.py`     | Настройка парсера аргументов и логирования                              |
| `utils.py`       | Вспомогательные функции для парсинга                                     |
| `constants.py`   | Константы, включая URL и шаблоны                                         |
| `exceptions.py`  | Пользовательские исключения                                              |
| `outputs.py`     | Обработка вывода: консоль и файлы                                        |

___
## Технологический стек
- Python
- BeautifulSoup (bs4)
- requests
- requests-cache
- prettytable
- logging
- argparse
___
### Автор: [Иван Кузнецов](https://github.com/KuznetcovIvan) 